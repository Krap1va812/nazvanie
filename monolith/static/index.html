<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }
        h1 { color: #667eea; margin-bottom: 10px; }
        .subtitle { color: #666; font-size: 14px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0,0,0,0.2); }
        .card h2 { color: #667eea; margin-bottom: 20px; font-size: 18px; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #333; font-weight: 500; font-size: 13px; }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
            font-size: 13px;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
        }
        button {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        button:hover { transform: scale(1.02); }
        button:active { transform: scale(0.98); }
        .output {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            border-left: 3px solid #667eea;
        }
        .output.success { border-left-color: #28a745; background: #f0f9f5; }
        .output.error { border-left-color: #dc3545; background: #fef5f5; color: #dc3545; }
        .message {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 12px;
        }
        .message.success { background: #d4edda; color: #155724; border-left: 3px solid #28a745; }
        .message.error { background: #f8d7da; color: #721c24; border-left: 3px solid #dc3545; }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .stat {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        .stat-value { font-size: 24px; font-weight: bold; }
        .stat-label { font-size: 12px; opacity: 0.9; margin-top: 5px; }
        .list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        .list-item {
            background: #f5f5f5;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 3px solid #667eea;
            font-size: 12px;
        }
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
            width: auto;
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        .section { display: none; }
        .section.active { display: block; }
        .header-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .info-box {
            background: #f0f4ff;
            padding: 12px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #667eea;
        }
        .info-box .value { font-size: 20px; font-weight: bold; color: #667eea; }
        .info-box .label { font-size: 12px; color: #666; margin-top: 5px; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; font-size: 11px; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</h1>
            <p class="subtitle">–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –º–æ–Ω–æ–ª–∏—Ç–æ–º –∏ 6 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏</p>
            <div class="header-info">
                <div class="info-box">
                    <div class="value">7</div>
                    <div class="label">–°–µ—Ä–≤–∏—Å–æ–≤</div>
                </div>
                <div class="info-box">
                    <div class="value">61</div>
                    <div class="label">–¢–µ—Å—Ç–æ–≤</div>
                </div>
                <div class="info-box">
                    <div class="value">Docker</div>
                    <div class="label">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–æ</div>
                </div>
                <div class="info-box">
                    <div class="value">REST API</div>
                    <div class="label">API Style</div>
                </div>
            </div>
        </header>

        <div class="tab-buttons">
            <button class="tab-btn active" onclick="switchTab('monolith')">üìä –ú–æ–Ω–æ–ª–∏—Ç</button>
            <button class="tab-btn" onclick="switchTab('users')">üë• Users (8001)</button>
            <button class="tab-btn" onclick="switchTab('auth')">üîê Auth (8002)</button>
            <button class="tab-btn" onclick="switchTab('payment')">üí≥ Payment (8003)</button>
            <button class="tab-btn" onclick="switchTab('products')">üì¶ Products (8004)</button>
            <button class="tab-btn" onclick="switchTab('notify')">üìß Notify (8005)</button>
            <button class="tab-btn" onclick="switchTab('analytics')">üìà Analytics (8006)</button>
        </div>

        <!-- –ú–û–ù–û–õ–ò–¢ -->
        <div id="monolith" class="section active">
            <div class="grid">
                <div class="card">
                    <h2>üë§ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    <div class="form-group">
                        <label>–ò–º—è</label>
                        <input type="text" id="monolith_name" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="monolith_email" placeholder="ivan@example.com">
                    </div>
                    <button onclick="monolithAddUser()">–î–æ–±–∞–≤–∏—Ç—å</button>
                    <div id="monolith_add_user_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üìù –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h2>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="monolith_task_title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="monolith_task_desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" style="height: 60px;"></textarea>
                    </div>
                    <button onclick="monolithAddTask()">–î–æ–±–∞–≤–∏—Ç—å</button>
                    <div id="monolith_add_task_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <button onclick="monolithGetStats()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <div id="monolith_stats_output" class="stats"></div>
                </div>

                <div class="card">
                    <h2>üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
                    <button onclick="monolithGetUsers()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <div id="monolith_users_output" class="list"></div>
                </div>

                <div class="card">
                    <h2>üìã –í—Å–µ –∑–∞–¥–∞—á–∏</h2>
                    <button onclick="monolithGetTasks()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <div id="monolith_tasks_output" class="list"></div>
                </div>

                <div class="card">
                    <h2>‚ù§Ô∏è Health Check</h2>
                    <button onclick="monolithHealth()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <div id="monolith_health_output" class="output"></div>
                </div>
            </div>
        </div>

        <!-- USER SERVICE -->
        <div id="users" class="section">
            <div class="grid">
                <div class="card">
                    <h2>‚úèÔ∏è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="user_username" placeholder="john_doe">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="user_email" placeholder="john@example.com">
                    </div>
                    <button onclick="userRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
                    <div id="user_register_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üîç –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="user_get_username" placeholder="john_doe">
                    </div>
                    <button onclick="userGet()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="user_get_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                    <button onclick="userCount()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="user_count_output" class="output"></div>
                </div>
            </div>
        </div>

        <!-- AUTH SERVICE -->
        <div id="auth" class="section">
            <div class="grid">
                <div class="card">
                    <h2>ÔøΩ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="auth_reg_username" placeholder="john_doe">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="auth_reg_password" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å">
                    </div>
                    <button onclick="authRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
                    <div id="auth_register_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üîë –í—Ö–æ–¥</h2>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="auth_username" placeholder="john_doe">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="auth_password" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å">
                    </div>
                    <button onclick="authLogin()">–í–æ–π—Ç–∏</button>
                    <div id="auth_login_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞</h2>
                    <div class="form-group">
                        <label>Token</label>
                        <input type="text" id="auth_token" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ –≤—Ö–æ–¥–∞">
                    </div>
                    <button onclick="authVerify()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <div id="auth_verify_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üö™ –í—ã—Ö–æ–¥</h2>
                    <div class="form-group">
                        <label>Token</label>
                        <input type="text" id="auth_logout_token" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω">
                    </div>
                    <button onclick="authLogout()">–í—ã–π—Ç–∏</button>
                    <div id="auth_logout_output" class="output"></div>
                </div>
            </div>
        </div>

        <!-- PAYMENT SERVICE -->
        <div id="payment" class="section">
            <div class="grid">
                <div class="card">
                    <h2>üí≥ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞</h2>
                    <div class="form-group">
                        <label>User ID</label>
                        <input type="text" id="payment_user_id" placeholder="user123">
                    </div>
                    <div class="form-group">
                        <label>–°—É–º–º–∞</label>
                        <input type="number" id="payment_amount" placeholder="100.00" step="0.01">
                    </div>
                    <button onclick="paymentProcess()">–û–±—Ä–∞–±–æ—Ç–∞—Ç—å</button>
                    <div id="payment_process_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üßæ –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</h2>
                    <div class="form-group">
                        <label>Transaction ID</label>
                        <input type="text" id="payment_txn_id" placeholder="txn_123">
                    </div>
                    <button onclick="paymentGetTransaction()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="payment_txn_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üí∞ –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    <div class="form-group">
                        <label>User ID</label>
                        <input type="text" id="payment_balance_user_id" placeholder="user123">
                    </div>
                    <button onclick="paymentGetBalance()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="payment_balance_output" class="output"></div>
                </div>
            </div>
        </div>

        <!-- PRODUCT SERVICE -->
        <div id="products" class="section">
            <div class="grid">
                <div class="card">
                    <h2>‚úèÔ∏è –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä</h2>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="product_name" placeholder="–ù–æ—É—Ç–±—É–∫">
                    </div>
                    <div class="form-group">
                        <label>–¶–µ–Ω–∞</label>
                        <input type="number" id="product_price" placeholder="999.99" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                        <input type="number" id="product_stock" placeholder="50" value="50">
                    </div>
                    <button onclick="productCreate()">–°–æ–∑–¥–∞—Ç—å</button>
                    <div id="product_create_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üì¶ –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>
                    <button onclick="productList()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <div id="product_list_output" class="list"></div>
                </div>

                <div class="card">
                    <h2>üìä –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                    <div class="form-group">
                        <label>Product ID</label>
                        <input type="text" id="product_update_id" placeholder="prod_1">
                    </div>
                    <div class="form-group">
                        <label>–ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                        <input type="number" id="product_new_stock" placeholder="100">
                    </div>
                    <button onclick="productUpdateStock()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <div id="product_update_output" class="output"></div>
                </div>
            </div>
        </div>

        <!-- NOTIFICATION SERVICE -->
        <div id="notify" class="section">
            <div class="grid">
                <div class="card">
                    <h2>üìß –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h2>
                    <div class="form-group">
                        <label>User ID</label>
                        <input type="text" id="notify_user_id" placeholder="user123">
                    </div>
                    <div class="form-group">
                        <label>–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                        <textarea id="notify_message" placeholder="–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" style="height: 60px;"></textarea>
                    </div>
                    <button onclick="notifySend()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    <div id="notify_send_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üì¨ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    <div class="form-group">
                        <label>User ID</label>
                        <input type="text" id="notify_get_user_id" placeholder="user123">
                    </div>
                    <button onclick="notifyGet()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <div id="notify_get_output" class="list"></div>
                </div>

                <div class="card">
                    <h2>‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ</h2>
                    <div class="form-group">
                        <label>Notification ID</label>
                        <input type="text" id="notify_mark_id" placeholder="notif_123">
                    </div>
                    <button onclick="notifyMarkAsRead()">–û—Ç–º–µ—Ç–∏—Ç—å</button>
                    <div id="notify_mark_output" class="output"></div>
                </div>
            </div>
        </div>

        <!-- ANALYTICS SERVICE -->
        <div id="analytics" class="section">
            <div class="grid">
                <div class="card">
                    <h2>üìç –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</h2>
                    <div class="form-group">
                        <label>User ID</label>
                        <input type="text" id="analytics_user_id" placeholder="user123">
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</label>
                        <input type="text" id="analytics_type" placeholder="login, purchase, etc">
                    </div>
                    <div class="form-group">
                        <label>–î–∞–Ω–Ω—ã–µ (JSON)</label>
                        <textarea id="analytics_data" placeholder='{"key": "value"}' style="height: 60px;"></textarea>
                    </div>
                    <button onclick="analyticsLog()">–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å</button>
                    <div id="analytics_log_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <button onclick="analyticsGetStats()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="analytics_stats_output" class="output"></div>
                </div>

                <div class="card">
                    <h2>üë§ –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    <div class="form-group">
                        <label>User ID</label>
                        <input type="text" id="analytics_user_events_id" placeholder="user123">
                    </div>
                    <button onclick="analyticsGetUserEvents()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="analytics_user_events_output" class="list"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const BASE_URL = 'http://localhost';

        function switchTab(tabName) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function showMessage(elementId, message, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="message ${isSuccess ? 'success' : 'error'}">${message}</div>`;
        }

        function showOutput(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.classList.remove('success', 'error');
            if (isError) element.classList.add('error');
            else element.classList.add('success');
            element.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
        }

        // –ú–û–ù–û–õ–ò–¢ (8000)
        async function monolithAddUser() {
            const name = document.getElementById('monolith_name').value.trim();
            const email = document.getElementById('monolith_email').value.trim();
            if (!name || !email) {
                showMessage('monolith_add_user_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8000/users?name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}`, {
                    method: 'POST'
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('monolith_add_user_output', data);
                    document.getElementById('monolith_name').value = '';
                    document.getElementById('monolith_email').value = '';
                } else {
                    showOutput('monolith_add_user_output', data, true);
                }
            } catch (error) {
                showOutput('monolith_add_user_output', { error: error.message }, true);
            }
        }

        async function monolithAddTask() {
            const title = document.getElementById('monolith_task_title').value.trim();
            const description = document.getElementById('monolith_task_desc').value.trim();
            if (!title || !description) {
                showMessage('monolith_add_task_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8000/tasks?title=${encodeURIComponent(title)}&description=${encodeURIComponent(description)}`, {
                    method: 'POST'
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('monolith_add_task_output', data);
                    document.getElementById('monolith_task_title').value = '';
                    document.getElementById('monolith_task_desc').value = '';
                } else {
                    showOutput('monolith_add_task_output', data, true);
                }
            } catch (error) {
                showOutput('monolith_add_task_output', { error: error.message }, true);
            }
        }

        async function monolithGetStats() {
            try {
                const response = await fetch(`${BASE_URL}:8000/stats`);
                const data = await response.json();
                const element = document.getElementById('monolith_stats_output');
                element.innerHTML = `
                    <div class="stat"><div class="stat-value">${data.total_users}</div><div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div></div>
                    <div class="stat"><div class="stat-value">${data.total_tasks}</div><div class="stat-label">–ó–∞–¥–∞—á</div></div>
                    <div class="stat"><div class="stat-value">${data.completed_tasks}</div><div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div></div>
                `;
            } catch (error) {
                showOutput('monolith_stats_output', { error: error.message }, true);
            }
        }

        async function monolithGetUsers() {
            try {
                const response = await fetch(`${BASE_URL}:8000/users`);
                const data = await response.json();
                const element = document.getElementById('monolith_users_output');
                element.innerHTML = data.users.map(u => `<div class="list-item">üë§ ${u.name} (${u.email})</div>`).join('');
            } catch (error) {
                showOutput('monolith_users_output', { error: error.message }, true);
            }
        }

        async function monolithGetTasks() {
            try {
                const response = await fetch(`${BASE_URL}:8000/tasks`);
                const data = await response.json();
                const element = document.getElementById('monolith_tasks_output');
                element.innerHTML = data.tasks.map(t => `<div class="list-item">üìù ${t.title} - ${t.completed ? '‚úÖ' : '‚è≥'}</div>`).join('');
            } catch (error) {
                showOutput('monolith_tasks_output', { error: error.message }, true);
            }
        }

        async function monolithHealth() {
            try {
                const response = await fetch(`${BASE_URL}:8000/health`);
                const data = await response.json();
                showOutput('monolith_health_output', data);
            } catch (error) {
                showOutput('monolith_health_output', { error: error.message }, true);
            }
        }

        // USER SERVICE (8001)
        async function userRegister() {
            const username = document.getElementById('user_username').value.trim();
            const email = document.getElementById('user_email').value.trim();
            if (!username || !email) {
                showMessage('user_register_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8001/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, email })
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('user_register_output', data);
                    document.getElementById('user_username').value = '';
                    document.getElementById('user_email').value = '';
                } else {
                    showOutput('user_register_output', data, true);
                }
            } catch (error) {
                showOutput('user_register_output', { error: error.message }, true);
            }
        }

        async function userGet() {
            const username = document.getElementById('user_get_username').value.trim();
            if (!username) {
                showMessage('user_get_output', '–í–≤–µ–¥–∏—Ç–µ username', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8001/users/${username}`);
                const data = await response.json();
                showOutput('user_get_output', data, !response.ok);
            } catch (error) {
                showOutput('user_get_output', { error: error.message }, true);
            }
        }

        async function userCount() {
            try {
                const response = await fetch(`${BASE_URL}:8001/count`);
                const data = await response.json();
                showOutput('user_count_output', data);
            } catch (error) {
                showOutput('user_count_output', { error: error.message }, true);
            }
        }

        // AUTH SERVICE (8002)
        async function authRegister() {
            const username = document.getElementById('auth_reg_username').value.trim();
            const password = document.getElementById('auth_reg_password').value.trim();
            if (!username || !password) {
                showMessage('auth_register_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8002/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('auth_register_output', data);
                    document.getElementById('auth_reg_username').value = '';
                    document.getElementById('auth_reg_password').value = '';
                } else {
                    showOutput('auth_register_output', data, true);
                }
            } catch (error) {
                showOutput('auth_register_output', { error: error.message }, true);
            }
        }

        async function authLogin() {
            const username = document.getElementById('auth_username').value.trim();
            const password = document.getElementById('auth_password').value.trim();
            if (!username || !password) {
                showMessage('auth_login_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8002/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('auth_login_output', data);
                    document.getElementById('auth_token').value = data.token;
                } else {
                    showOutput('auth_login_output', data, true);
                }
            } catch (error) {
                showOutput('auth_login_output', { error: error.message }, true);
            }
        }

        async function authVerify() {
            const token = document.getElementById('auth_token').value.trim();
            if (!token) {
                showMessage('auth_verify_output', '–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8002/verify`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ token })
                });
                const data = await response.json();
                showOutput('auth_verify_output', data, !response.ok);
            } catch (error) {
                showOutput('auth_verify_output', { error: error.message }, true);
            }
        }

        async function authLogout() {
            const token = document.getElementById('auth_logout_token').value.trim();
            if (!token) {
                showMessage('auth_logout_output', '–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8002/logout`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ token })
                });
                const data = await response.json();
                showOutput('auth_logout_output', data);
            } catch (error) {
                showOutput('auth_logout_output', { error: error.message }, true);
            }
        }

        // PAYMENT SERVICE (8003)
        async function paymentProcess() {
            const user_id = document.getElementById('payment_user_id').value.trim();
            const amount = parseFloat(document.getElementById('payment_amount').value);
            if (!user_id || !amount) {
                showMessage('payment_process_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8003/pay`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_id, amount })
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('payment_process_output', data);
                    document.getElementById('payment_amount').value = '';
                } else {
                    showOutput('payment_process_output', data, true);
                }
            } catch (error) {
                showOutput('payment_process_output', { error: error.message }, true);
            }
        }

        async function paymentGetTransaction() {
            const txn_id = document.getElementById('payment_txn_id').value.trim();
            if (!txn_id) {
                showMessage('payment_txn_output', '–í–≤–µ–¥–∏—Ç–µ transaction ID', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8003/transaction/${txn_id}`);
                const data = await response.json();
                showOutput('payment_txn_output', data, !response.ok);
            } catch (error) {
                showOutput('payment_txn_output', { error: error.message }, true);
            }
        }

        async function paymentGetBalance() {
            const user_id = document.getElementById('payment_balance_user_id').value.trim();
            if (!user_id) {
                showMessage('payment_balance_output', '–í–≤–µ–¥–∏—Ç–µ user ID', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8003/balance/${user_id}`);
                const data = await response.json();
                showOutput('payment_balance_output', data);
            } catch (error) {
                showOutput('payment_balance_output', { error: error.message }, true);
            }
        }

        // PRODUCT SERVICE (8004)
        async function productCreate() {
            const name = document.getElementById('product_name').value.trim();
            const price = parseFloat(document.getElementById('product_price').value);
            const stock = parseInt(document.getElementById('product_stock').value);
            if (!name || !price || !stock) {
                showMessage('product_create_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8004/products`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, price, stock })
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('product_create_output', data);
                    document.getElementById('product_name').value = '';
                    document.getElementById('product_price').value = '';
                } else {
                    showOutput('product_create_output', data, true);
                }
            } catch (error) {
                showOutput('product_create_output', { error: error.message }, true);
            }
        }

        async function productList() {
            try {
                const response = await fetch(`${BASE_URL}:8004/products`);
                const data = await response.json();
                const element = document.getElementById('product_list_output');
                element.innerHTML = data.products.map(p => `<div class="list-item">üì¶ ${p.name} - $${p.price} (${p.stock} —à—Ç)</div>`).join('');
            } catch (error) {
                showOutput('product_list_output', { error: error.message }, true);
            }
        }

        async function productUpdateStock() {
            const id = document.getElementById('product_update_id').value.trim();
            const quantity = parseInt(document.getElementById('product_new_stock').value);
            if (!id || !quantity) {
                showMessage('product_update_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8004/products/${id}/stock`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ quantity })
                });
                const data = await response.json();
                showOutput('product_update_output', data, !response.ok);
            } catch (error) {
                showOutput('product_update_output', { error: error.message }, true);
            }
        }

        // NOTIFICATION SERVICE (8005)
        async function notifySend() {
            const user_id = document.getElementById('notify_user_id').value.trim();
            const message = document.getElementById('notify_message').value.trim();
            if (!user_id || !message) {
                showMessage('notify_send_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8005/notify`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_id, message })
                });
                const data = await response.json();
                if (response.ok) {
                    showOutput('notify_send_output', data);
                    document.getElementById('notify_message').value = '';
                } else {
                    showOutput('notify_send_output', data, true);
                }
            } catch (error) {
                showOutput('notify_send_output', { error: error.message }, true);
            }
        }

        async function notifyGet() {
            const user_id = document.getElementById('notify_get_user_id').value.trim();
            if (!user_id) {
                showMessage('notify_get_output', '–í–≤–µ–¥–∏—Ç–µ user ID', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8005/notifications/${user_id}`);
                const data = await response.json();
                const element = document.getElementById('notify_get_output');
                element.innerHTML = data.notifications.map(n => `<div class="list-item">üìß ${n.message} - ${n.read ? '‚úÖ' : '‚ùå'}</div>`).join('');
            } catch (error) {
                showOutput('notify_get_output', { error: error.message }, true);
            }
        }

        async function notifyMarkAsRead() {
            const id = document.getElementById('notify_mark_id').value.trim();
            if (!id) {
                showMessage('notify_mark_output', '–í–≤–µ–¥–∏—Ç–µ notification ID', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8005/notifications/${id}/read`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                const data = await response.json();
                showOutput('notify_mark_output', data, !response.ok);
            } catch (error) {
                showOutput('notify_mark_output', { error: error.message }, true);
            }
        }

        // ANALYTICS SERVICE (8006)
        async function analyticsLog() {
            const user_id = document.getElementById('analytics_user_id').value.trim();
            const event_type = document.getElementById('analytics_type').value.trim();
            const dataStr = document.getElementById('analytics_data').value.trim();
            if (!user_id || !event_type) {
                showMessage('analytics_log_output', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', false);
                return;
            }
            let data = {};
            if (dataStr) {
                try {
                    data = JSON.parse(dataStr);
                } catch (e) {
                    showMessage('analytics_log_output', '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π JSON —Ñ–æ—Ä–º–∞—Ç', false);
                    return;
                }
            }
            try {
                const response = await fetch(`${BASE_URL}:8006/event`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_id, event_type, data })
                });
                const respData = await response.json();
                if (response.ok) {
                    showOutput('analytics_log_output', respData);
                } else {
                    showOutput('analytics_log_output', respData, true);
                }
            } catch (error) {
                showOutput('analytics_log_output', { error: error.message }, true);
            }
        }

        async function analyticsGetStats() {
            try {
                const response = await fetch(`${BASE_URL}:8006/stats`);
                const data = await response.json();
                showOutput('analytics_stats_output', data);
            } catch (error) {
                showOutput('analytics_stats_output', { error: error.message }, true);
            }
        }

        async function analyticsGetUserEvents() {
            const user_id = document.getElementById('analytics_user_events_id').value.trim();
            if (!user_id) {
                showMessage('analytics_user_events_output', '–í–≤–µ–¥–∏—Ç–µ user ID', false);
                return;
            }
            try {
                const response = await fetch(`${BASE_URL}:8006/user-events/${user_id}`);
                const data = await response.json();
                const element = document.getElementById('analytics_user_events_output');
                element.innerHTML = data.events.map(e => `<div class="list-item">üìä ${e.type}</div>`).join('');
            } catch (error) {
                showOutput('analytics_user_events_output', { error: error.message }, true);
            }
        }
    </script>
</body>
</html>
